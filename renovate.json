{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "enabledManagers": [
    "dockerfile",
    "github-actions",
    "jsonata",
    "npm",
    "nvm",
    "custom.regex"
  ],
  "extends": [
    "config:recommended",
    ":separateMultipleMajorReleases",
    ":enableVulnerabilityAlerts",
    "customManagers:biomeVersions",
    "customManagers:dockerfileVersions",
    "docker:pinDigests",
    "helpers:pinGitHubActionDigestsToSemver"
  ],
  "labels": [
    "dependency"
  ],
  "minimumReleaseAge": "3 days",
  "gitIgnoredAuthors": [
    "41898282+github-actions[bot]@users.noreply.github.com"
  ],
  "packageRules": [
    {
      "matchDepTypes": [
        "engines"
      ],
      "rangeStrategy": "auto"
    },
    {
      "description": "cdxgen images: limit docker image updates to exclude major or minor updates as we explicitly set these versions",
      "matchDatasources": [
        "docker"
      ],
      "matchFileNames": [
        "ci/**/*"
      ],
      "matchUpdateTypes": [
        "major",
        "minor"
      ],
      "enabled": false
    },
    {
      "description": "cdxgen images: limit sdk updates to non-major updates as we explicitly set these versions",
      "matchDatasources": [
        "golang-version",
        "gradle-version",
        "maven",
        "node-version"
      ],
      "matchFileNames": [
        "ci/**/*"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "enabled": false
    },
    {
      "description": "Limit .versions/* files updates to non-major update types as we explicitly set major versions",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        ".versions/*"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "enabled": false
    },
    {
      "description": "Pin GitHub Actions digests to major version - for those actions which don't support semver",
      "extends": [
        "helpers:pinGitHubActionDigests"
      ],
      "matchPackageNames": [
        "addnab/docker-run-action"
      ],
      "extractVersion": "^(?<version>v?\\d+)$",
      "versioning": "regex:^v?(?<major>\\d+)(\\.(?<minor>\\d+)\\.(?<patch>\\d+))?$"
    },
    {
      "description": "Wait 14 days before updating Node.js versions",
      "matchPackageNames": [
        "/(?:^|/)node$/"
      ],
      "minimumReleaseAge": "14 days"
    }
  ],
  "customManagers": [
    {
      "description": "Custom manager for devEngines runtime in package.json",
      "customType": "jsonata",
      "fileFormat": "json",
      "managerFilePatterns": [
        "/^package.json$/"
      ],
      "matchStrings": [
        "devEngines.runtime.{ \"depName\": name, \"currentValue\": version, \"depType\": \"devDependencies\"}",
        "devEngines.packageManager.{ \"depName\": name, \"currentValue\": version, \"depType\": \"packageManager\"}"
      ],
      "datasourceTemplate": "npm"
    },
    {
      "description": "Custom manager to maintain ./versions/* files used within GitHub workflows",
      "customType": "regex",
      "managerFilePatterns": [
        "/.versions/.*/"
      ],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[a-zA-Z0-9-._]+?) depName=(?<depName>[^\\s]+?)\\s+(?<currentValue>.+?)(\\s)?$"
      ]
    }
  ]
}